{
  "name": "Lifecycle Logging Strategy",
  "version": "1.0.0",
  "description": "Example strategy demonstrating lifecycle events with logging. This strategy is designed to test the start/shutdown lifecycle functionality. It logs when the strategy is started (with timestamp), when shutdown is requested (with uptime statistics), cleanup progress during shutdown, and when shutdown is complete.",
  "author": "Midcurve Finance",
  "abi": [
    {
      "type": "constructor",
      "inputs": [
        {
          "name": "operator_",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "core_",
          "type": "address",
          "internalType": "address"
        }
      ],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "core",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "address",
          "internalType": "address"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "epoch",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "uint64",
          "internalType": "uint64"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "eventsProcessed",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "uint256",
          "internalType": "uint256"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "gcEpoch",
      "inputs": [
        {
          "name": "epochToSweep",
          "type": "uint64",
          "internalType": "uint64"
        },
        {
          "name": "maxItems",
          "type": "uint256",
          "internalType": "uint256"
        }
      ],
      "outputs": [
        {
          "name": "swept",
          "type": "uint256",
          "internalType": "uint256"
        },
        {
          "name": "done",
          "type": "bool",
          "internalType": "bool"
        }
      ],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "lifecycleStatus",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "uint8",
          "internalType": "enum LifecycleMixin.LifecycleStatus"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "operator",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "address",
          "internalType": "address"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "startedAt",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "uint256",
          "internalType": "uint256"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "step",
      "inputs": [
        {
          "name": "input",
          "type": "bytes",
          "internalType": "bytes"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "submitEffectResult",
      "inputs": [
        {
          "name": "epoch_",
          "type": "uint64",
          "internalType": "uint64"
        },
        {
          "name": "idempotencyKey",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "ok",
          "type": "bool",
          "internalType": "bool"
        },
        {
          "name": "data",
          "type": "bytes",
          "internalType": "bytes"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "error",
      "name": "AlreadyActive",
      "inputs": []
    },
    {
      "type": "error",
      "name": "AlreadyShutdown",
      "inputs": []
    },
    {
      "type": "error",
      "name": "AlreadyShuttingDown",
      "inputs": []
    },
    {
      "type": "error",
      "name": "AlreadyStarting",
      "inputs": []
    },
    {
      "type": "error",
      "name": "EffectNeeded",
      "inputs": [
        {
          "name": "epoch",
          "type": "uint64",
          "internalType": "uint64"
        },
        {
          "name": "idempotencyKey",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "effectType",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "payload",
          "type": "bytes",
          "internalType": "bytes"
        }
      ]
    },
    {
      "type": "error",
      "name": "InvalidStepEvent",
      "inputs": []
    },
    {
      "type": "error",
      "name": "NotActive",
      "inputs": []
    },
    {
      "type": "error",
      "name": "NotCore",
      "inputs": []
    },
    {
      "type": "error",
      "name": "NotOperator",
      "inputs": []
    },
    {
      "type": "error",
      "name": "UnknownLifecycleCommand",
      "inputs": [
        {
          "name": "command",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ]
    },
    {
      "type": "error",
      "name": "UnsupportedLifecycleVersion",
      "inputs": [
        {
          "name": "got",
          "type": "uint32",
          "internalType": "uint32"
        }
      ]
    },
    {
      "type": "error",
      "name": "ZeroAddress",
      "inputs": []
    }
  ],
  "bytecode": "0x60806040523480156200001157600080fd5b50604051620015fa380380620015fa8339810160408190526200003491620000c5565b81816001600160a01b03821615806200005457506001600160a01b038116155b15620000735760405163d92e233d60e01b815260040160405180910390fd5b600080546001600160a01b039384166001600160a01b0319918216179091556001805492909316911617905550620000fd9050565b80516001600160a01b0381168114620000c057600080fd5b919050565b60008060408385031215620000d957600080fd5b620000e483620000a8565b9150620000f460208401620000a8565b90509250929050565b6114ed806200010d6000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c8063b89f756d11610066578063b89f756d1461012c578063c41b486f14610143578063cdeba62d14610158578063f21f537d1461016b578063f2f4eb261461017457600080fd5b8063570ca7351461009857806358571086146100c85780637f79cdb5146100e9578063900cf0cf14610111575b600080fd5b6000546100ab906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b6005546100dc90600160401b900460ff1681565b6040516100bf919061102b565b6100fc6100f736600461106f565b610187565b604080519283529015156020830152016100bf565b6005546040516001600160401b0390911681526020016100bf565b61013560075481565b6040519081526020016100bf565b6101566101513660046110da565b6103b4565b005b61015661016636600461114f565b610570565b61013560065481565b6001546100ab906001600160a01b031681565b60015460009081906001600160a01b031633146101b75760405163e2aae06b60e01b815260040160405180910390fd5b6005546001600160401b03908116908516106102095760405162461bcd60e51b815260206004820152600c60248201526b0c2c6e8d2ecca40cae0dec6d60a31b60448201526064015b60405180910390fd5b600083116102465760405162461bcd60e51b815260206004820152600a60248201526906d61784974656d733d360b41b6044820152606401610200565b6001600160401b038416600090815260036020908152604080832060049092529091205481548082106102835760006001945094505050506103ad565b600061028f87846111a6565b90508181111561029c5750805b80831015610319576001600160401b038816600090815260026020526040812085549091908690869081106102d3576102d36111bf565b600091825260208083209091015483528201929092526040018120805460ff19168155906103046001830182610fa8565b50508280610311906111d5565b93505061029c565b6001600160401b03881660009081526004602052604090205461033c90826111ee565b6001600160401b038916600090815260046020526040902082905595508181036103a3576001600160401b038816600090815260036020526040812061038191610fe2565b6001600160401b038816600090815260046020526040812055600194506103a8565b600094505b505050505b9250929050565b6000546001600160a01b031633146103df57604051631f0853c160e21b815260040160405180910390fd5b6005546001600160401b03908116908616111561042e5760405162461bcd60e51b815260206004820152600d60248201526c65706f636820746f6f206e657760981b6044820152606401610200565b6001600160401b0385166000908152600260209081526040808320878452909152812090815460ff16600281111561046857610468611015565b146104fc5783801561048f57506001815460ff16600281111561048d5761048d611015565b145b806104b85750831580156104b857506002815460ff1660028111156104b6576104b6611015565b145b6104f65760405162461bcd60e51b815260206004820152600f60248201526e0e6e8c2e8eae640dad2e6dac2e8c6d608b1b6044820152606401610200565b50610569565b8361050857600261050b565b60015b8154829060ff1916600183600281111561052757610527611015565b02179055506001810161053b838583611297565b50506001600160401b0385166000908152600360209081526040822080546001810182559083529120018490555b5050505050565b6000546001600160a01b0316331461059b57604051631f0853c160e21b815260040160405180910390fd5b60008060006105aa85856105e5565b9250925092506105bb838383610625565b5050600580546001600160401b038082166001011667ffffffffffffffff19909116179055505050565b60008060608084101561060b5760405163dffef72760e01b815260040160405180910390fd5b61061784860186611356565b919790965090945092505050565b7fd5b3bbdfb49ea04b2c75b919c721f1ef65f0754b86e4cbf7df9b4bcd53ceaf2a830361065c576106578383836106ed565b505050565b6106678383836106ed565b61066f6107c1565b61067857505050565b6106d37f1655553bc1b9c3d7c22d4d2c91d7e3aecd8631d5e7ef50a80da092529a41302c8460075460016106ac91906111a6565b6040805160208101939093528201526060015b6040516020818303038152906040526107e9565b600780549060006106e3836111d5565b9190505550505050565b7fd5b3bbdfb49ea04b2c75b919c721f1ef65f0754b86e4cbf7df9b4bcd53ceaf2a830361076a5763ffffffff821660011461074357604051635f65f6e560e11b815263ffffffff83166004820152602401610200565b600081806020019051810190610759919061142b565b9050610764816107f9565b50505050565b6003600554600160401b900460ff16600481111561078a5761078a611015565b03610657576000610799610a30565b90508015610764576005805460ff60401b191668040000000000000000179055610764610a96565b60006002600554600160401b900460ff1660048111156107e3576107e3611015565b14905090565b6107f560008383610b86565b5050565b7fbe3c26a64d88239991ba164ff2b468dd1f37dd3d8107c4c763966a7a0402c73f810361094e576001600554600160401b900460ff16600481111561084057610840611015565b0361085e5760405163e8adcfdd60e01b815260040160405180910390fd5b6002600554600160401b900460ff16600481111561087e5761087e611015565b0361089c57604051637cdf305160e11b815260040160405180910390fd5b6003600554600160401b900460ff1660048111156108bc576108bc611015565b036108da5760405163645a81c160e11b815260040160405180910390fd5b6004600554600160401b900460ff1660048111156108fa576108fa611015565b03610918576040516365eca15b60e11b815260040160405180910390fd5b6005805460ff60401b1916600160401b179055610933610cba565b506005805460ff60401b191668020000000000000000179055565b7f2b22d873f791abe31d4310d327f02daef6f297a9bbbce4a994bf2bbeadf02d578103610a14576004600554600160401b900460ff16600481111561099557610995611015565b036109b3576040516365eca15b60e11b815260040160405180910390fd5b6003600554600160401b900460ff1660048111156109d3576109d3611015565b036109f15760405163645a81c160e11b815260040160405180910390fd5b6005805460ff60401b191668030000000000000000179055610a11610d87565b50565b6040516314fcdc7f60e31b815260048101829052602401610200565b6000610a907ffab63ea2599b36a75d094c6a3bf77f542c4c487c76c0654e6de33d3affc789836040516020016106bf90602080825260169082015275436c65616e7570207374657020657865637574696e6760501b604082015260600190565b50600190565b600060065442610aa691906111ee565b9050610a117fe7ce6dc7d427ccb222a5bd9b6ea61718cfb743900db9f6fb2e26959c6864965a82600754604051602001610b7292919060a08082526011908201527053687574646f776e20636f6d706c65746560781b60c082015260e0602082018190526014908201527366696e616c5f757074696d655f7365636f6e647360601b610100820152604081019290925261012060608301819052601690830152751d1bdd185b17d95d995b9d1cd7dc1c9bd8d95cdcd95960521b61014083015260808201526101600190565b604051602081830303815290604052610e58565b6000610b9a6005546001600160401b031690565b600554604051626c6f6760e81b60208201526001600160c01b031960c093841b81166023830152600160481b90920490921b16602b8201526033016040516020818303038152906040528051906020012090506000848484604051602001610c049392919061148a565b60405160208183030381529060405290506000610c42837f3039cf35251df02018e097e77a4115938266b3ac806536a8f6032d2875a046cf84610e64565b5090506000816001811115610c5957610c59611015565b1480610c7657506001816001811115610c7457610c74611015565b145b15610cb257600580546001600160401b03600160481b80830482166001019091160270ffffffffffffffff000000000000000000199091161790555b505050505050565b4260068190556040805160208101829052601060608201526f14dd1c985d1959de481cdd185c9d195960821b608082015290810191909152610d20907f7013b17339381ec56e018f5beebef3a1c866af6ad7187d55197200301b43fc2f9060a001610b72565b610d857fe7ce6dc7d427ccb222a5bd9b6ea61718cfb743900db9f6fb2e26959c6864965a604051602001610b72906020808252601c908201527f5472616e736974696f6e656420746f2041435449564520737461746500000000604082015260600190565b565b600060065442610d9791906111ee565b9050610a117fe7ce6dc7d427ccb222a5bd9b6ea61718cfb743900db9f6fb2e26959c6864965a82600754604051602001610b7292919060a08082526012908201527114da1d5d191bdddb881c995c5d595cdd195960721b60c082015260e060208201819052600e908201526d757074696d655f7365636f6e647360901b6101008201526040810192909252610120606083018190526010908301526f195d995b9d1cd7dc1c9bd8d95cdcd95960821b61014083015260808201526101600190565b6107f560018383610b86565b6005546001600160401b0316600090815260026020908152604080832086845290915281206060906001815460ff166002811115610ea457610ea4611015565b03610f4557600081600101808054610ebb90611217565b80601f0160208091040260200160405190810160405280929190818152602001828054610ee790611217565b8015610f345780601f10610f0957610100808354040283529160200191610f34565b820191906000526020600020905b815481529060010190602001808311610f1757829003601f168201915b505050505090509250925050610fa0565b6002815460ff166002811115610f5d57610f5d611015565b03610f7457600181600101808054610ebb90611217565b6005546040516373ecc7fd60e11b8152610200916001600160401b0316908890889088906004016114b5565b935093915050565b508054610fb490611217565b6000825580601f10610fc4575050565b601f016020900490600052602060002090810190610a119190610ffc565b5080546000825590600052602060002090810190610a1191905b5b808211156110115760008155600101610ffd565b5090565b634e487b7160e01b600052602160045260246000fd5b602081016005831061104d57634e487b7160e01b600052602160045260246000fd5b91905290565b80356001600160401b038116811461106a57600080fd5b919050565b6000806040838503121561108257600080fd5b61108b83611053565b946020939093013593505050565b60008083601f8401126110ab57600080fd5b5081356001600160401b038111156110c257600080fd5b6020830191508360208285010111156103ad57600080fd5b6000806000806000608086880312156110f257600080fd5b6110fb86611053565b9450602086013593506040860135801515811461111757600080fd5b925060608601356001600160401b0381111561113257600080fd5b61113e88828901611099565b969995985093965092949392505050565b6000806020838503121561116257600080fd5b82356001600160401b0381111561117857600080fd5b61118485828601611099565b90969095509350505050565b634e487b7160e01b600052601160045260246000fd5b808201808211156111b9576111b9611190565b92915050565b634e487b7160e01b600052603260045260246000fd5b6000600182016111e7576111e7611190565b5060010190565b818103818111156111b9576111b9611190565b634e487b7160e01b600052604160045260246000fd5b600181811c9082168061122b57607f821691505b60208210810361124b57634e487b7160e01b600052602260045260246000fd5b50919050565b601f82111561065757600081815260208120601f850160051c810160208610156112785750805b601f850160051c820191505b81811015610cb257828155600101611284565b6001600160401b038311156112ae576112ae611201565b6112c2836112bc8354611217565b83611251565b6000601f8411600181146112f657600085156112de5750838201355b600019600387901b1c1916600186901b178355610569565b600083815260209020601f19861690835b828110156113275786850135825560209485019460019092019101611307565b50868210156113445760001960f88860031b161c19848701351681555b505060018560011b0183555050505050565b60008060006060848603121561136b57600080fd5b83359250602084013563ffffffff8116811461138657600080fd5b915060408401356001600160401b03808211156113a257600080fd5b818601915086601f8301126113b657600080fd5b8135818111156113c8576113c8611201565b604051601f8201601f19908116603f011681019083821181831017156113f0576113f0611201565b8160405282815289602084870101111561140957600080fd5b8260208601602083013760006020848301015280955050505050509250925092565b60006020828403121561143d57600080fd5b5051919050565b6000815180845260005b8181101561146a5760208185018101518683018201520161144e565b506000602082860101526020601f19601f83011685010191505092915050565b60ff841681528260208201526060604082015260006114ac6060830184611444565b95945050505050565b6001600160401b03851681528360208201528260408201526080606082015260006114e36080830184611444565b969550505050505056",
  "constructorParams": [
    {
      "name": "operator_",
      "type": "address",
      "source": "operator-address",
      "ui": {
        "element": "hidden",
        "label": "Operator Address",
        "description": "Per-strategy automation wallet (KMS-backed) that executes step() calls"
      }
    },
    {
      "name": "core_",
      "type": "address",
      "source": "core-address",
      "ui": {
        "element": "hidden",
        "label": "Core Address",
        "description": "Core orchestrator address that funds GC operations"
      }
    }
  ],
  "tags": [
    "example",
    "lifecycle",
    "logging",
    "testing"
  ],
  "quoteToken": {
    "type": "basic-currency",
    "symbol": "USD"
  }
}
